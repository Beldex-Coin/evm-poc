import base64
import os
import pkg_resources
import unittest

import asyncio
import aiounittest

#from .test_data import XmrTestData
from beldex_serialize import bdxserialize as x
from beldex_serialize import bdxtypes as bdx
from beldex_serialize.helper.msgdecoder import *
#from ..core.readwriter import MemoryReaderWriter

bdx_hex = b'04020000000202000a018a0230029b01d60111380d10c252fedeb3019c9063ae1d685f23eba64453af12812ccaa90c5ac6232ab6e65802000a3360d6013f13434f1c23bc019f95323cade606a157608b6d9f77c6d2fb0c2cd5123fa1184ef5bb9b7cb05d5302000291c22fc5d9a3d67a8f6df181b37d6aadea89a8eb62060a7c7fe0d6c3a4722f6a0002116eb2e4c26fdc0ffb05c8b7eb98ecf9b58ba192d79a346c214ea8d61e4ffe792c0116b91bc5bf5a5e7ae150847453f9a2a27e013d0335daa6d2fac90c1814b6df8d020901e3b145b4acd13e770005caa15823989d1c15c6359130f77b499172c4c881e49a724aa30d8befecf95dce1f8f249da847850cf351f2fc5f844c56ad74bf3ee9e04658ddc36003f8634cf1f5babfb78d18781e51b603a17b74a113c9a2a201ca46044d87d715a2c6e78ca518b7598f83a4f733684cc0d23f5b7152f6bd1e4841c50a8abbbf8e33f821e74b87f8b5af75f15e7eb759ab0e5abd3ff5e80f5b24448ee50ed5d8d3b2c42d0b888e1855195ccf2e4a4b56812b6d33d3f586bf4dae4b7d3091d0492e977672bb03f6fff6fc735e776d1bf62b13f9e64e3523020d4c2d1782f6e01523d50d81b2b8d97e2a4256297703b5b5f02cef4e6ff0d7b7620e4be9de7a4570134f87c304b45ba089d9aee431ca0e7cfcaa13214829b843df00073db7be19e33406bf48f214776367fe9f4751b659e947a16fc3d08f0b967775a1edc67d02221dd93779f9b660df75631c744b936c4bb53dd6133aa95afb34fc4e41e9d992dfbd98bd01f8f99d84a3ab99b56fbc714d94fb51680b129c7d8748ddde6a999e66ecfe9f41bc3235f0ff57422249552fd749de89a5bb4f6135c30b4ca04b3893811753dc2d21f963fbe8e0b8cdf94546e6caaacd92062891e08c7f4b9375298ed92446907d42b580917158ce5ad98fc460fe9e502d0c7a95ccc3425540da5bb2e6991fc30f302657ff22b7b467c061dfa2fcf5691c1f2f5519a1b66c07074a2d1af206d7e4681eaf0dc5236d8581864a71fee9369c54ee65f38c645cf8d8fe0f717c930f458a27831f1e723bff936eb4a1744842ba61c847976f4754408bb157d25472972c856053d560fecd990778f777cab8774bdc82d9e14c0e0830ac98203f8f569cfbcfdf2400e9d48245f6e3e8b0a92d9d5737361f8c17ccc4c98eec900470336c0e5d573542411946f509986a57853524aee5f5e866e33ed5c7a668e1d61e62f990177a34b0e65245c20a511f985adfdb843eeeef2185c138671e9f04d7ce840d71e628d640db6bb6671025f47881fe2828b6a8a944891f92ef6311f63f662690aaad5558787c1f439ea28e86732a671cd14067c6292716be0d40bdf0a2087e5fa0cce0735148ab2ca66acc5ea31f205894f8b5338684e1c20c091946a28292e84105fc9e08a27d970a43cb43bc20a56b98c45c44d1393c85049c2a313a3a026eceabedd05ad3e18a7dcda266e32f2c3a4d3406d0e9b6a5c20f689cab59fbc09701e05d21ccb17544bd47abacd49910d5ead3bf4e839c01d80f9f8810f566ed903165dc2b14b45482ca10801058ecec12c40459381cb428f00475aab45d101d3a76c8a3868c5e9a51ec747bbdf790ce1205ef662edb14f20c04b738ef3084a6935b0947067329f25f5adf07ceaf8d1e62884d574bdfc264e20f762b50ccb524d711f6068a82ce4f75fc49c437b7a288993f79a39890a88c4001c7fbd2aadb30147a4c330f7b458a5fd90e9108b5e09a3728a3befe5b61e2fa000b7217bd5ea0566fe9bf06292ce28294e9023fc3b31df4b1a262faddfd54120c045672fc07b2031ad4af9444924c7a3aa0c5036d9fe795d728162ecdd899eb0717afe511d1a75a95f0f33146099f0299763265dc0c7e98a9b528b92e669258064e84e289962c4a697599cd743d4e53ecc32631a276b4586fc6a51b9c87f47f08d0f8e64ab5ada442e65c9665cbc5dff95ba67a7d07355d62305e69bd492ca41708893fa20c307af51e444c8dfd8dff36462564db57533fd6f0c119725589a9006543b5e7467d2c41c77fafa92b1ea2870171833fcae4029e3af8e865d95f4600904aea7892e58eeee06d54a40e21a0f8c8738a36b69dde7d13a133f3ad98ee09de57a75802093fee1841f279a45238fc1b34c0b1a69bc6236646ad2105176d0094ccad53a717248d691b9eccec8374b7f2c38add142e139496d321c2cc9f5303f146790992ad3ab4933fed358898544a3cfcf63ce49f5ea9a672123524ba9a03fd0b334a539fce2ca1c80e829a96a082124f762fd3416fa004cc17ebe8e2520f10750ca3a55387e16ec2fe7ba44a6b2e1bd06d42c1af28ea342ddc6ef5fb3009964bbe015276b47f1632fe85044be620ff3a6fb74867c75b176df969f1e16e0bd383c646059a535032baa909cbaf7abb28d000f300ccbd803050761a8af705016da58508fd5f638cb2fc3066db33d2da56aa66e5eae1c9b6d8b5a23180d3d50279414f447c6cea8237ec3e76f17d0bf25be9c5a08a372858049a5a495af672aef3ae458daef329f245de4a399f84da1bf13b68e92959f8006899c9495c71351105673c93cbdbf35f18c67b12509cf78766e6af15ddd2e4d0cffc5b4ea8da9816'
bdx_contract= b'040100000202000a1097eb01c041b533f01751dd1386048206063f083c61e99ec74c99ac497e1ea9e89073a7e0cb60df950f23694259ab5dd9bd02000a02b0a6028d4aea029a0cd7038806bd0957ef013b53833cefb61dcc84e4499578c9862809f1f60422c832c6e9217e2fb9ef45f1010002a2f8f83a7a6c41f29e969e1e050e5e74b9582ed2c306cd85b83b47ba8bd195f25a01bb4cb1d44bc4a33af91797584edc4194d3d136732b1915ecb4cf04c3b102cd6b02090127e090552d6fad6742000f6d794669727374436f6e74726163740a48656c6c6f5730726c6410270000000000007910fd117e030000000505a8b5daf637dc5c51a1cdee4c8a7ff5f7634fe7744efeb289569152de876109d1b341d0e3b9fbf2cd9b9589234601ef1c489fd14614ec67312c2be3932b16d12329b31d942fc43d377ce4bff0243e917547da89793bd069419b33ede0eb3d6e051627883a5bb038f4bded3231b0af63c02b6e64cda31efb9507c3f15da6c5dfcbab7eb383b5776133bdd062055ac6ecab0e79dceff38ac3946bd8a721a401da76c115ddd8db205e25df8b846737c629c2383a82f350d9943e5d7e2322acaddf6df2a3d3396414ef7011f99e4d80017bcca4daa13ac25a70818079074675ab2b9f2d5ec00b1dd40837be4954585206061abaf2b50a5e360e3f6384ca0bf3614cc48d290235699e8eed5153efe2eda947d02155abc0fc35c0b64b9160fca5df428c91f99017878a17b53e8961f1bc801336b2ea40114006727bfa8f7b9d2117a551425ef9c73efd22206e4f8404689a74b4ff02a4bffba4a4df103e60c6f267169bcebbc43e9250bf126828b58de0ba8f9b8ba7423510d0f5a46e66224ef8681aca8cb8f13b83a3e2e6594c5c3162e358690836dcde105b97a4215a1bb2896ad342bf19948ab92383c5c3d68245a1b0cd06921c4c5b577417722a9784db9bc2304185bad9c694b01f8cb2019269faad62c65ffd653249e608f58be7ffd01a827140bd2e67a285e2c9b329adb96f7c473b27e8369e1911e7b8a7df3648736d65ddc78a2ec116d743047df47551572f66de2799cfdba13f547470ffafb45462f7b7a96b5faf597c09ac47808f7e054aa7336a49ecc8eda225f347792ee1f2e491e61cd5803edffcd472637eab6e1f8e104af38ed8dbdfc62667e1405b08a3b3e71783d115874e37b28597fb31deaad9f7f2f7fd31121331e12f8a4ebe6fe64acb4911b1f43e68ffe75ad7cb878f0c9678820440c03818ee8d19777835a2528cd33c9423ea59a0d9f9c28f024e60dbbcdc70032528d2eb0bb6c599cb89c84309f1605f91ff3c1f089e2e626cf4b49cb71d94064c463fb00362269550202f61bf894a3a8bd30d7335f3271a3c90b619ce409106b91c0bf741f713956e559a66a5afa597a2a23412a35efa4fce77d5eae4b0070476d94f9a88645d453db0fab7118a8ea0b8c6ab07d46c00436febb061bc09f104fe600edacb7f408ebbae896f974071b4a4e41159e0ce12146e3babfa786f020784355370873c2bc8d8856150fb3ff6a2cb84625820cb1c3a71d68b0bcb97ca0b53dcd7b9c6eb5b2f12b0178a02dc6ae7eb4b754c5db954f75514a7655bd64e069362179c052414dbe90e2d544c2404cc91a10cdf79d00964c50dcd8dfde04b0818a9226edbda9c0c78eec98f1ce41eb14e3b928241c839bca013c90852c0c20a2992af5d486e5dfb8af7d3d180adf404d8d6922fa1a2813d03aacbada6158906cd67c0d9177d44ed48694c8750f5acf3a5126418fd48a129deca9148c3a66808f2bba082646c97be3fd4d2371b4802a6408c0b6c71b28650471d11fa3ff82501afb4af6c5d98a8a088d0a885ae96ff8261562b9bea6d31a4653c7da62d3567c24c99ced378a34abb746196abb2fc17fb432f6edfeeb5c1ae527dcfabb9595e0ccaabf717342dc25840e33051132a2539a8b34b5bd3c22a8418dcab2b1857d60487a4367edccc3aff84b5d1b40dbe02dd7fb2f6658b01fe11880edeecae21160c18301c96f3639f138027e9e77e0eae409a3d11ec286e9cd979ca89f0491487013c3358d9cabdf90105ebeee18f5927e88da6dfd3daecc5089c22eb25c2d3d10d97a4d74b46de06b0112585caf88fb25e94c521ab0d35a01408f248ccc38ab8066c13f6be09d14a46bb2574e1c5684a23f9068de4a5c83900af582b034ccea6079cfad6f3afcb6ccf50f4f4a7c6981fb396cda8ee71e61adfe6ccac6a54d56705826b728f8db7cfad0bc2b52a0e2d01f9432a993f192ceec1bc6cc6111966f10f0985656324b819f6e9af4ab3b7e23427f4748b8e25c6e05fecda30e8c2df700de20011b687e17bcf9aaf9aa9bab355a26b64bf85bb924011bc2a7080b441f00cb7b0e9410b17c853bded7a6adf88cb7635c15f97f5847f00b30f8a6d1ab3c755abefbee2a616b39f66224ca4da5b021baf7d0f75bf2e28e0ad06db22b6d2ef405b781b19278b0ce8b3e9bf1e0e0964f90bd6e02997fb10c9bc5a7494962a9536'
bdx_contract= b'040100000202000a1097eb01c041b533f01751dd1386048206063f083c61e99ec74c99ac497e1ea9e89073a7e0cb60df950f23694259ab5dd9bd02000a02b0a6028d4aea029a0cd7038806bd0957ef013b53833cefb61dcc84e4499578c9862809f1f60422c832c6e9217e2fb9ef45f1010002a2f8f83a7a6c41f29e969e1e050e5e74b9582ed2c306cd85b83b47ba8bd195f25a01bb4cb1d44bc4a33af91797584edc4194d3d136732b1915ecb4cf04c3b102cd6b02090127e090552d6fad6742000f6d794669727374436f6e74726163740a48656c6c6f5730726c6410270000000000007910fd117e030000000505a8b5daf637dc5c51a1cdee4c8a7ff5f7634fe7744efeb289569152de876109d1b341d0e3b9fbf2cd9b9589234601ef1c489fd14614ec67312c2be3932b16d12329b31d942fc43d377ce4bff0243e917547da89793bd069419b33ede0eb3d6e051627883a5bb038f4bded3231b0af63c02b6e64cda31efb9507c3f15da6c5dfcbab7eb383b5776133bdd062055ac6ecab0e79dceff38ac3946bd8a721a401da76c115ddd8db205e25df8b846737c629c2383a82f350d9943e5d7e2322acaddf6df2a3d3396414ef7011f99e4d80017bcca4daa13ac25a70818079074675ab2b9f2d5ec00b1dd40837be4954585206061abaf2b50a5e360e3f6384ca0bf3614cc48d290235699e8eed5153efe2eda947d02155abc0fc35c0b64b9160fca5df428c91f99017878a17b53e8961f1bc801336b2ea40114006727bfa8f7b9d2117a551425ef9c73efd22206e4f8404689a74b4ff02a4bffba4a4df103e60c6f267169bcebbc43e9250bf126828b58de0ba8f9b8ba7423510d0f5a46e66224ef8681aca8cb8f13b83a3e2e6594c5c3162e358690836dcde105b97a4215a1bb2896ad342bf19948ab92383c5c3d68245a1b0cd06921c4c5b577417722a9784db9bc2304185bad9c694b01f8cb2019269faad62c65ffd653249e608f58be7ffd01a827140bd2e67a285e2c9b329adb96f7c473b27e8369e1911e7b8a7df3648736d65ddc78a2ec116d743047df47551572f66de2799cfdba13f547470ffafb45462f7b7a96b5faf597c09ac47808f7e054aa7336a49ecc8eda225f347792ee1f2e491e61cd5803edffcd472637eab6e1f8e104af38ed8dbdfc62667e1405b08a3b3e71783d115874e37b28597fb31deaad9f7f2f7fd31121331e12f8a4ebe6fe64acb4911b1f43e68ffe75ad7cb878f0c9678820440c03818ee8d19777835a2528cd33c9423ea59a0d9f9c28f024e60dbbcdc70032528d2eb0bb6c599cb89c84309f1605f91ff3c1f089e2e626cf4b49cb71d94064c463fb00362269550202f61bf894a3a8bd30d7335f3271a3c90b619ce409106b91c0bf741f713956e559a66a5afa597a2a23412a35efa4fce77d5eae4b0070476d94f9a88645d453db0fab7118a8ea0b8c6ab07d46c00436febb061bc09f104fe600edacb7f408ebbae896f974071b4a4e41159e0ce12146e3babfa786f020784355370873c2bc8d8856150fb3ff6a2cb84625820cb1c3a71d68b0bcb97ca0b53dcd7b9c6eb5b2f12b0178a02dc6ae7eb4b754c5db954f75514a7655bd64e069362179c052414dbe90e2d544c2404cc91a10cdf79d00964c50dcd8dfde04b0818a9226edbda9c0c78eec98f1ce41eb14e3b928241c839bca013c90852c0c20a2992af5d486e5dfb8af7d3d180adf404d8d6922fa1a2813d03aacbada6158906cd67c0d9177d44ed48694c8750f5acf3a5126418fd48a129deca9148c3a66808f2bba082646c97be3fd4d2371b4802a6408c0b6c71b28650471d11fa3ff82501afb4af6c5d98a8a088d0a885ae96ff8261562b9bea6d31a4653c7da62d3567c24c99ced378a34abb746196abb2fc17fb432f6edfeeb5c1ae527dcfabb9595e0ccaabf717342dc25840e33051132a2539a8b34b5bd3c22a8418dcab2b1857d60487a4367edccc3aff84b5d1b40dbe02dd7fb2f6658b01fe11880edeecae21160c18301c96f3639f138027e9e77e0eae409a3d11ec286e9cd979ca89f0491487013c3358d9cabdf90105ebeee18f5927e88da6dfd3daecc5089c22eb25c2d3d10d97a4d74b46de06b0112585caf88fb25e94c521ab0d35a01408f248ccc38ab8066c13f6be09d14a46bb2574e1c5684a23f9068de4a5c83900af582b034ccea6079cfad6f3afcb6ccf50f4f4a7c6981fb396cda8ee71e61adfe6ccac6a54d56705826b728f8db7cfad0bc2b52a0e2d01f9432a993f192ceec1bc6cc6111966f10f0985656324b819f6e9af4ab3b7e23427f4748b8e25c6e05fecda30e8c2df700de20011b687e17bcf9aaf9aa9bab355a26b64bf85bb924011bc2a7080b441f00cb7b0e9410b17c853bded7a6adf88cb7635c15f97f5847f00b30f8a6d1ab3c755abefbee2a616b39f66224ca4da5b021baf7d0f75bf2e28e0ad06db22b6d2ef405b781b19278b0ce8b3e9bf1e0e0964f90bd6e02997fb10c9bc5a7494962a9536'
bdx_extra =b'01bb4cb1d44bc4a33af91797584edc4194d3d136732b1915ecb4cf04c3b102cd6b02090127e090552d6fad6742000f6d794669727374436f6e74726163740a48656c6c6f5730726c6410270000000000007910fd117e03000000'
bdx_extra =b'01132bd7fa1eaa832988af382e41291c683616f5bd0c7356509c0356da7f2073b8020901ae8b4a3a7ff884434200064269674f6e65ac02414141414141414141414242424242424242424241414141414141414141424242424242424242424141414141414141414142424242424242424242414141414141414141414242424242424242424241414141414141414141424242424242424242424141414141414141414142424242424242424242414141414141414141414242424242424242424241414141414141414141424242424242424242424141414141414141414142424242424242424242414141414141414141414242424242424242424241414141414141414141424242424242424242424141414141414141414142424242424242424242414141414141414141414242424242424242424243434343434343434343424242424242424242424343434343434343434342424242424242424242b5e60f000000000079b5bc217e03000000'
#bdex_json = '"version":4,"output_unlock_times":[0,0],"unlock_time":0,"vin":[{"key":{"amount":0,"key_offsets":[1,266,48,2,155,214,17,56,13,16],"k_image":"c252fedeb3019c9063ae1d685f23eba64453af12812ccaa90c5ac6232ab6e658"\}\},{"key":{"amount":0,"key_offsets":[51,96,214,63,19,67,79,28,35,188],"k_image":"9f95323cade606a157608b6d9f77c6d2fb0c2cd5123fa1184ef5bb9b7cb05d53"\}\}],"vout":[{"amount":0,"target":{"key":"91c22fc5d9a3d67a8f6df181b37d6aadea89a8eb62060a7c7fe0d6c3a4722f6a"\}\},{"amount":0,"target":{"key":"116eb2e4c26fdc0ffb05c8b7eb98ecf9b58ba192d79a346c214ea8d61e4ffe79"\}\}],"extra":[1,22,185,27,197,191,90,94,122,225,80,132,116,83,249,162,162,126,1,61,3,53,218,166,210,250,201,12,24,20,182,223,141,2,9,1,227,177,69,180,172,209,62,119],"type":0,"rct_signatures":{"type":5,"txnFee":1446090,"ecdhInfo":[{"amount":"23989d1c15c63591"},{"amount":"30f77b499172c4c8"}],"outPk":["81e49a724aa30d8befecf95dce1f8f249da847850cf351f2fc5f844c56ad74bf","3ee9e04658ddc36003f8634cf1f5babfb78d18781e51b603a17b74a113c9a2a2"]},"rctsig_prunable":{"nbp":1,"bp":[{"A":"ca46044d87d715a2c6e78ca518b7598f83a4f733684cc0d23f5b7152f6bd1e48","S":"41c50a8abbbf8e33f821e74b87f8b5af75f15e7eb759ab0e5abd3ff5e80f5b24","T1":"448ee50ed5d8d3b2c42d0b888e1855195ccf2e4a4b56812b6d33d3f586bf4dae","T2":"4b7d3091d0492e977672bb03f6fff6fc735e776d1bf62b13f9e64e3523020d4c","taux":"2d1782f6e01523d50d81b2b8d97e2a4256297703b5b5f02cef4e6ff0d7b7620e","mu":"4be9de7a4570134f87c304b45ba089d9aee431ca0e7cfcaa13214829b843df00","L":["3db7be19e33406bf48f214776367fe9f4751b659e947a16fc3d08f0b967775a1","edc67d02221dd93779f9b660df75631c744b936c4bb53dd6133aa95afb34fc4e","41e9d992dfbd98bd01f8f99d84a3ab99b56fbc714d94fb51680b129c7d8748dd","de6a999e66ecfe9f41bc3235f0ff57422249552fd749de89a5bb4f6135c30b4c","a04b3893811753dc2d21f963fbe8e0b8cdf94546e6caaacd92062891e08c7f4b","9375298ed92446907d42b580917158ce5ad98fc460fe9e502d0c7a95ccc34255","40da5bb2e6991fc30f302657ff22b7b467c061dfa2fcf5691c1f2f5519a1b66c"],"R":["074a2d1af206d7e4681eaf0dc5236d8581864a71fee9369c54ee65f38c645cf8","d8fe0f717c930f458a27831f1e723bff936eb4a1744842ba61c847976f475440","8bb157d25472972c856053d560fecd990778f777cab8774bdc82d9e14c0e0830","ac98203f8f569cfbcfdf2400e9d48245f6e3e8b0a92d9d5737361f8c17ccc4c9","8eec900470336c0e5d573542411946f509986a57853524aee5f5e866e33ed5c7","a668e1d61e62f990177a34b0e65245c20a511f985adfdb843eeeef2185c13867","1e9f04d7ce840d71e628d640db6bb6671025f47881fe2828b6a8a944891f92ef"],"a":"6311f63f662690aaad5558787c1f439ea28e86732a671cd14067c6292716be0d","b":"40bdf0a2087e5fa0cce0735148ab2ca66acc5ea31f205894f8b5338684e1c20c","t":"091946a28292e84105fc9e08a27d970a43cb43bc20a56b98c45c44d1393c8504"}],"CLSAGs":[{"s":["9c2a313a3a026eceabedd05ad3e18a7dcda266e32f2c3a4d3406d0e9b6a5c20f","689cab59fbc09701e05d21ccb17544bd47abacd49910d5ead3bf4e839c01d80f","9f8810f566ed903165dc2b14b45482ca10801058ecec12c40459381cb428f004","75aab45d101d3a76c8a3868c5e9a51ec747bbdf790ce1205ef662edb14f20c04","b738ef3084a6935b0947067329f25f5adf07ceaf8d1e62884d574bdfc264e20f","762b50ccb524d711f6068a82ce4f75fc49c437b7a288993f79a39890a88c4001","c7fbd2aadb30147a4c330f7b458a5fd90e9108b5e09a3728a3befe5b61e2fa00","0b7217bd5ea0566fe9bf06292ce28294e9023fc3b31df4b1a262faddfd54120c","045672fc07b2031ad4af9444924c7a3aa0c5036d9fe795d728162ecdd899eb07","17afe511d1a75a95f0f33146099f0299763265dc0c7e98a9b528b92e66925806"],"c1":"4e84e289962c4a697599cd743d4e53ecc32631a276b4586fc6a51b9c87f47f08","D":"d0f8e64ab5ada442e65c9665cbc5dff95ba67a7d07355d62305e69bd492ca417"},{"s":["08893fa20c307af51e444c8dfd8dff36462564db57533fd6f0c119725589a900","6543b5e7467d2c41c77fafa92b1ea2870171833fcae4029e3af8e865d95f4600","904aea7892e58eeee06d54a40e21a0f8c8738a36b69dde7d13a133f3ad98ee09","de57a75802093fee1841f279a45238fc1b34c0b1a69bc6236646ad2105176d00","94ccad53a717248d691b9eccec8374b7f2c38add142e139496d321c2cc9f5303","f146790992ad3ab4933fed358898544a3cfcf63ce49f5ea9a672123524ba9a03","fd0b334a539fce2ca1c80e829a96a082124f762fd3416fa004cc17ebe8e2520f","10750ca3a55387e16ec2fe7ba44a6b2e1bd06d42c1af28ea342ddc6ef5fb3009","964bbe015276b47f1632fe85044be620ff3a6fb74867c75b176df969f1e16e0b","d383c646059a535032baa909cbaf7abb28d000f300ccbd803050761a8af70501"],"c1":"6da58508fd5f638cb2fc3066db33d2da56aa66e5eae1c9b6d8b5a23180d3d502","D":"79414f447c6cea8237ec3e76f17d0bf25be9c5a08a372858049a5a495af672ae"}],"pseudoOuts":["f3ae458daef329f245de4a399f84da1bf13b68e92959f8006899c9495c713511","05673c93cbdbf35f18c67b12509cf78766e6af15ddd2e4d0cffc5b4ea8da9816"]\}\}'
tsx_bin = base64.b16decode(bdx_contract, True)
reader = x.MemoryReaderWriter(bytearray(tsx_bin))
ar1 = x.Archive(reader, False, bdx.hf_versions(14))

test_deser = asyncio.run(ar1.message(None, bdx.TransactionPrefix))#, bdx.TransactionPrefix)) TxExtraTagContractSource
#print(test_deser)
contract = decodeContract(test_deser.extra)
print(contract)
print(''.join(chr(x) for x in contract.contract.contact_name))
print(''.join(chr(x) for x in contract.contract.contract_source))
